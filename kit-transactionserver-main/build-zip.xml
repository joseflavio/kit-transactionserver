<?xml version="1.0" encoding="UTF-8"?>
<project name="kit-transactionserver-zip" default="copy-dependencies" basedir=".">

	<property name="tmp.dir" value="tmp/zip"/>

	<target name="clean">
		<delete dir="${tmp.dir}"/>
	</target>

	<target name="build-all-jars" depends="clean">

		<property name="build.lib.dir" value="../kit-transactionserver-main/${tmp.dir}/lib"/>

		<ant antfile="build.xml" target="jar">
			<property name="build.dest.dir" value="${build.lib.dir}"/>
		</ant>

		<ant dir="../kit-transactionserver-services" antfile="build.xml" target="jar">
			<property name="build.dest.dir" value="${build.lib.dir}"/>
		</ant>

		<ant dir="../kit-transactionserver-simplestatemachine" antfile="build.xml" target="jar">
			<property name="build.dest.dir" value="${build.lib.dir}"/>
		</ant>

	</target>

	<target name="copy-dependencies" depends="build-all-jars">

		<mkdir dir="${tmp.dir}/logs"/>

		<copy todir="${tmp.dir}/">
			<fileset dir="working-dir" includes="**/*" />
		</copy>

		<copy todir="${tmp.dir}/lib/">
			<fileset dir="lib" includes="**/*.jar" />
		</copy>

	</target>

</project>